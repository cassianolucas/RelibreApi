CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);


DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE author (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        name varchar(255) NOT NULL,
        CONSTRAINT "PK_author" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE book (
        id bigserial NOT NULL,
        description text NOT NULL,
        code_integration varchar(255) NULL,
        isbn13 varchar(13) NULL,
        title varchar(144) NOT NULL,
        maturity_rating varchar(144) NULL,
        average_rating varchar(144) NULL,
        created_at timestamp NOT NULL,
        CONSTRAINT "PK_book" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE category (
        id bigserial NOT NULL,
        name varchar(255) NOT NULL,
        created_at timestamp NOT NULL,
        CONSTRAINT "PK_category" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE contact (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        "Email" varchar(255) NOT NULL,
        phone varchar(50) NOT NULL,
        CONSTRAINT "PK_contact" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE email_verification (
        id bigserial NOT NULL,
        login varchar(255) NOT NULL,
        code_verification varchar(36) NOT NULL,
        created_at timestamp NOT NULL,
        CONSTRAINT "PK_email_verification" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE "Notification" (
        "Id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        "Active" boolean NOT NULL,
        "CreatedAt" timestamp without time zone NOT NULL,
        "UpdatedAt" timestamp without time zone NOT NULL,
        "Name" text NULL,
        "Description" text NULL,
        CONSTRAINT "PK_Notification" PRIMARY KEY ("Id")
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE person (
        id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        name varchar NOT NULL,
        last_name varchar NULL,
        document varchar NULL,
        type_person character varying(2) NOT NULL,
        "Birthday" timestamp without time zone NOT NULL,
        CONSTRAINT "PK_person" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE profile (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        name varchar(144) NOT NULL,
        CONSTRAINT "PK_profile" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE type (
        id bigserial NOT NULL,
        description varchar(255) NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        CONSTRAINT "PK_type" PRIMARY KEY (id)
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE author_book (
        "IdBook" bigint NOT NULL,
        "IdAuthor" bigint NOT NULL,
        CONSTRAINT "PK_author_book" PRIMARY KEY ("IdBook", "IdAuthor"),
        CONSTRAINT fk_author_book_author_id_author FOREIGN KEY ("IdAuthor") REFERENCES author (id) ON DELETE RESTRICT,
        CONSTRAINT fk_author_book_book_id_book FOREIGN KEY ("IdBook") REFERENCES book (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE category_book (
        "IdBook" bigint NOT NULL,
        "IdCategory" bigint NOT NULL,
        CONSTRAINT "PK_category_book" PRIMARY KEY ("IdBook", "IdCategory"),
        CONSTRAINT fk_category_book_book_id_book FOREIGN KEY ("IdBook") REFERENCES book (id) ON DELETE RESTRICT,
        CONSTRAINT fk_category_book_category_id_category FOREIGN KEY ("IdCategory") REFERENCES category (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE address (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        id_person bigint NOT NULL,
        nick_name varchar NULL,
        latitude varchar(25) NOT NULL,
        longitude varchar(25) NOT NULL,
        master boolean NOT NULL,
        "PersonId" bigint NULL,
        CONSTRAINT "PK_address" PRIMARY KEY (id),
        CONSTRAINT "FK_address_person_PersonId" FOREIGN KEY ("PersonId") REFERENCES person (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE library (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        id_person bigint NOT NULL,
        CONSTRAINT "PK_library" PRIMARY KEY (id),
        CONSTRAINT fk_library_person_id_person FOREIGN KEY (id_person) REFERENCES person (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE "NotificationPerson" (
        "Id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        "Active" boolean NOT NULL,
        "CreatedAt" timestamp without time zone NOT NULL,
        "UpdatedAt" timestamp without time zone NOT NULL,
        "IdNotification" bigint NOT NULL,
        "IdPerson" bigint NOT NULL,
        "NotificationId" bigint NULL,
        "PersonId" bigint NULL,
        CONSTRAINT "PK_NotificationPerson" PRIMARY KEY ("Id"),
        CONSTRAINT "FK_NotificationPerson_Notification_NotificationId" FOREIGN KEY ("NotificationId") REFERENCES "Notification" ("Id") ON DELETE RESTRICT,
        CONSTRAINT "FK_NotificationPerson_person_PersonId" FOREIGN KEY ("PersonId") REFERENCES person (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE phone (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        updated_at timestamp NOT NULL,
        id_person bigint NOT NULL,
        number varchar(50) NOT NULL,
        master boolean NOT NULL,
        CONSTRAINT "PK_phone" PRIMARY KEY (id),
        CONSTRAINT fk_phone_person_id_person FOREIGN KEY (id_person) REFERENCES person (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE access_profile (
        id bigserial NOT NULL,
        access varchar(144) NOT NULL,
        id_profile bigint NOT NULL,
        CONSTRAINT "PK_access_profile" PRIMARY KEY (id),
        CONSTRAINT fk_profile_access_profile_id_profile FOREIGN KEY (id_profile) REFERENCES profile (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE "user" (
        login varchar(255) NOT NULL,
        password varchar(255) NOT NULL,
        id_profile bigint NOT NULL,
        id_person bigint NOT NULL,
        login_verified boolean NOT NULL,
        CONSTRAINT "PK_user" PRIMARY KEY (login),
        CONSTRAINT fk_user_person_id_person FOREIGN KEY (id_person) REFERENCES person (id) ON DELETE RESTRICT,
        CONSTRAINT fk_user_profile_id_profile FOREIGN KEY (id_profile) REFERENCES profile (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE library_book (
        id bigserial NOT NULL,
        active boolean NOT NULL,
        created_at timestamp NOT NULL,
        "UpdatedAt" timestamp without time zone NOT NULL,
        id_library bigint NOT NULL,
        id_contact bigint NOT NULL,
        id_book bigint NOT NULL,
        reating varchar(255) NULL,
        CONSTRAINT "PK_library_book" PRIMARY KEY (id),
        CONSTRAINT fk_library_book_book_id_book FOREIGN KEY (id_book) REFERENCES book (id) ON DELETE RESTRICT,
        CONSTRAINT fk_library_book_contact_id_contact FOREIGN KEY (id_contact) REFERENCES contact (id) ON DELETE RESTRICT,
        CONSTRAINT fk_library_book_library_id_library FOREIGN KEY (id_library) REFERENCES library (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE image (
        id bigserial NOT NULL,
        thumbnail varchar(255) NULL,
        small varchar(255) NULL,
        medium varchar(255) NULL,
        large varchar(255) NULL,
        small_thumbnail varchar(255) NULL,
        extra_large varchar(255) NULL,
        id_library_book bigint NOT NULL,
        CONSTRAINT "PK_image" PRIMARY KEY (id),
        CONSTRAINT fk_library_book_image_id_library_book FOREIGN KEY (id_library_book) REFERENCES library_book (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE TABLE library_book_type (
        id_library_book bigint NOT NULL,
        id_type bigint NOT NULL,
        CONSTRAINT "PK_library_book_type" PRIMARY KEY (id_library_book, id_type),
        CONSTRAINT fk_library_book_library_book_id_library_book FOREIGN KEY (id_library_book) REFERENCES library_book (id) ON DELETE RESTRICT,
        CONSTRAINT fk_library_book_library_book_id_type FOREIGN KEY (id_type) REFERENCES type (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    INSERT INTO profile (id, active, created_at, name, updated_at)
    VALUES (1, TRUE, TIMESTAMP '2020-09-24 21:33:15', 'PJ', TIMESTAMP '2020-09-24 21:33:15');
    INSERT INTO profile (id, active, created_at, name, updated_at)
    VALUES (2, TRUE, TIMESTAMP '2020-09-24 21:33:15', 'PF', TIMESTAMP '2020-09-24 21:33:15');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    INSERT INTO type (id, created_at, description, updated_at)
    VALUES (1, TIMESTAMP '2020-09-24 21:33:15', 'Troca', TIMESTAMP '0001-01-01 00:00:00');
    INSERT INTO type (id, created_at, description, updated_at)
    VALUES (2, TIMESTAMP '2020-09-24 21:33:15', 'Doação', TIMESTAMP '0001-01-01 00:00:00');
    INSERT INTO type (id, created_at, description, updated_at)
    VALUES (3, TIMESTAMP '2020-09-24 21:33:15', 'Emprestimo', TIMESTAMP '0001-01-01 00:00:00');
    INSERT INTO type (id, created_at, description, updated_at)
    VALUES (4, TIMESTAMP '2020-09-24 21:33:15', 'Interesse', TIMESTAMP '0001-01-01 00:00:00');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    INSERT INTO access_profile (id, access, id_profile)
    VALUES (1, 'access.administrator', 1);
    INSERT INTO access_profile (id, access, id_profile)
    VALUES (2, 'access.default', 2);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_access_profile_id_profile" ON access_profile (id_profile);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_address_PersonId" ON address ("PersonId");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_author_book_IdAuthor" ON author_book ("IdAuthor");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_category_book_IdCategory" ON category_book ("IdCategory");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_image_id_library_book" ON image (id_library_book);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE UNIQUE INDEX "IX_library_id_person" ON library (id_person);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_library_book_id_book" ON library_book (id_book);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_library_book_id_contact" ON library_book (id_contact);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_library_book_id_library" ON library_book (id_library);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_library_book_type_id_type" ON library_book_type (id_type);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_NotificationPerson_NotificationId" ON "NotificationPerson" ("NotificationId");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_NotificationPerson_PersonId" ON "NotificationPerson" ("PersonId");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_phone_id_person" ON phone (id_person);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_user_id_person" ON "user" (id_person);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE INDEX "IX_user_id_profile" ON "user" (id_profile);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    CREATE UNIQUE INDEX "IX_user_login" ON "user" (login);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200925003315_initiaç') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20200925003315_initiaç', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    ALTER TABLE address ADD full_address varchar NOT NULL DEFAULT '';
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-09-28 21:51:18', updated_at = TIMESTAMP '2020-09-28 21:51:18'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-09-28 21:51:18', updated_at = TIMESTAMP '2020-09-28 21:51:18'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 21:51:18'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 21:51:18'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 21:51:18'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 21:51:18'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929005119_SQL_0001') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20200929005119_SQL_0001', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    ALTER TABLE address DROP CONSTRAINT "FK_address_person_PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    DROP INDEX "IX_address_PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    ALTER TABLE address DROP COLUMN "PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-09-28 22:01:16', updated_at = TIMESTAMP '2020-09-28 22:01:16'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-09-28 22:01:16', updated_at = TIMESTAMP '2020-09-28 22:01:16'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 22:01:16'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 22:01:16'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 22:01:16'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-28 22:01:16'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    CREATE INDEX "IX_address_id_person" ON address (id_person);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    ALTER TABLE address ADD CONSTRAINT fk_adress_person_id_person FOREIGN KEY (id_person) REFERENCES person (id) ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200929010117_SQL_0002') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20200929010117_SQL_0002', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    ALTER TABLE library_book RENAME COLUMN "UpdatedAt" TO updated_at;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    ALTER TABLE library_book ALTER COLUMN updated_at TYPE timestamp;
    ALTER TABLE library_book ALTER COLUMN updated_at SET NOT NULL;
    ALTER TABLE library_book ALTER COLUMN updated_at DROP DEFAULT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-09-29 21:44:45', updated_at = TIMESTAMP '2020-09-29 21:44:45'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-09-29 21:44:45', updated_at = TIMESTAMP '2020-09-29 21:44:45'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-29 21:44:45', description = 'Trocar'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-29 21:44:45', description = 'Doar'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-29 21:44:45', description = 'Emprestar'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-09-29 21:44:45'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20200930004446_SQL_0004') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20200930004446_SQL_0004', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    ALTER TABLE "NotificationPerson" DROP COLUMN "Active";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    ALTER TABLE "NotificationPerson" DROP COLUMN "UpdatedAt";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    ALTER TABLE "Notification" DROP COLUMN "Active";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    ALTER TABLE "Notification" DROP COLUMN "UpdatedAt";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-05 19:37:16', updated_at = TIMESTAMP '2020-10-05 19:37:16'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-05 19:37:16', updated_at = TIMESTAMP '2020-10-05 19:37:16'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-05 19:37:16'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-05 19:37:16'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-05 19:37:16'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-05 19:37:16'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201005223717_SQL_0005') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201005223717_SQL_0005', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    ALTER TABLE library_book DROP CONSTRAINT fk_library_book_contact_id_contact;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    DROP INDEX "IX_library_book_id_contact";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    ALTER TABLE library_book DROP COLUMN id_contact;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    ALTER TABLE "NotificationPerson" ADD "Active" boolean NOT NULL DEFAULT FALSE;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 22:48:44', updated_at = TIMESTAMP '2020-10-06 22:48:44'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 22:48:44', updated_at = TIMESTAMP '2020-10-06 22:48:44'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:48:44'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:48:44'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:48:44'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:48:44'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007014844_SQL_0006') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201007014844_SQL_0006', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE "NotificationPerson" DROP CONSTRAINT "FK_NotificationPerson_Notification_NotificationId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE "Notification" DROP CONSTRAINT "PK_Notification";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE "Notification" RENAME TO notification;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification RENAME COLUMN "Name" TO name;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification RENAME COLUMN "Description" TO description;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification RENAME COLUMN "CreatedAt" TO created_at;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification ALTER COLUMN name TYPE varchar(255);
    ALTER TABLE notification ALTER COLUMN name SET NOT NULL;
    ALTER TABLE notification ALTER COLUMN name DROP DEFAULT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification ALTER COLUMN description TYPE varchar(255);
    ALTER TABLE notification ALTER COLUMN description SET NOT NULL;
    ALTER TABLE notification ALTER COLUMN description DROP DEFAULT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification ALTER COLUMN created_at TYPE timestamp;
    ALTER TABLE notification ALTER COLUMN created_at SET NOT NULL;
    ALTER TABLE notification ALTER COLUMN created_at DROP DEFAULT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE notification ADD CONSTRAINT "PK_notification" PRIMARY KEY ("Id");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 22:55:59', updated_at = TIMESTAMP '2020-10-06 22:55:59'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 22:55:59', updated_at = TIMESTAMP '2020-10-06 22:55:59'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:55:59'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:55:59'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:55:59'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 22:55:59'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    ALTER TABLE "NotificationPerson" ADD CONSTRAINT "FK_NotificationPerson_notification_NotificationId" FOREIGN KEY ("NotificationId") REFERENCES notification ("Id") ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007015559_SQL_0007') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201007015559_SQL_0007', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE "NotificationPerson" DROP CONSTRAINT "FK_NotificationPerson_notification_NotificationId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE "NotificationPerson" DROP CONSTRAINT "FK_NotificationPerson_person_PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE "NotificationPerson" DROP CONSTRAINT "PK_NotificationPerson";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    DROP INDEX "IX_NotificationPerson_NotificationId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE "NotificationPerson" DROP COLUMN "NotificationId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE "NotificationPerson" RENAME TO notification_person;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person RENAME COLUMN "Active" TO active;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person RENAME COLUMN "IdPerson" TO id_person;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person RENAME COLUMN "IdNotification" TO id_notification;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person RENAME COLUMN "CreatedAt" TO created_at;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER INDEX "IX_NotificationPerson_PersonId" RENAME TO "IX_notification_person_PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person ALTER COLUMN created_at TYPE timestamp;
    ALTER TABLE notification_person ALTER COLUMN created_at SET NOT NULL;
    ALTER TABLE notification_person ALTER COLUMN created_at DROP DEFAULT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person ADD CONSTRAINT "PK_notification_person" PRIMARY KEY ("Id");
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    CREATE TABLE "ContactBook" (
        id_contact bigint NOT NULL,
        id_library_book bigint NOT NULL,
        CONSTRAINT "PK_ContactBook" PRIMARY KEY (id_contact, id_library_book),
        CONSTRAINT fk_contact_book_contact_id_contact FOREIGN KEY (id_contact) REFERENCES contact (id) ON DELETE RESTRICT,
        CONSTRAINT fk_contact_book_library_book_id_library_book FOREIGN KEY (id_library_book) REFERENCES library_book (id) ON DELETE RESTRICT
    );
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 23:00:49', updated_at = TIMESTAMP '2020-10-06 23:00:49'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 23:00:49', updated_at = TIMESTAMP '2020-10-06 23:00:49'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:00:49'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:00:49'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:00:49'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:00:49'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    CREATE INDEX "IX_notification_person_id_notification" ON notification_person (id_notification);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    CREATE INDEX "IX_ContactBook_id_library_book" ON "ContactBook" (id_library_book);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person ADD CONSTRAINT fk_notification_person_notification_id_notification FOREIGN KEY (id_notification) REFERENCES notification ("Id") ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    ALTER TABLE notification_person ADD CONSTRAINT "FK_notification_person_person_PersonId" FOREIGN KEY ("PersonId") REFERENCES person (id) ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020049_SQL_0008') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201007020049_SQL_0008', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    ALTER TABLE notification_person DROP CONSTRAINT "FK_notification_person_person_PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    DROP INDEX "IX_notification_person_PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    ALTER TABLE notification_person DROP COLUMN "PersonId";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 23:06:16', updated_at = TIMESTAMP '2020-10-06 23:06:16'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 23:06:16', updated_at = TIMESTAMP '2020-10-06 23:06:16'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:06:16'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:06:16'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:06:16'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:06:16'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    CREATE INDEX "IX_notification_person_id_person" ON notification_person (id_person);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    ALTER TABLE notification_person ADD CONSTRAINT fk_notification_person_person_id_person FOREIGN KEY (id_person) REFERENCES person (id) ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007020616_SQL_0009') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201007020616_SQL_0009', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE "ContactBook" DROP CONSTRAINT "PK_ContactBook";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE "ContactBook" RENAME TO contact_book;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE person RENAME COLUMN "Birthday" TO birthday;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE contact RENAME COLUMN "Email" TO email;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE category_book RENAME COLUMN "IdCategory" TO id_category;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE category_book RENAME COLUMN "IdBook" TO id_book;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER INDEX "IX_category_book_IdCategory" RENAME TO "IX_category_book_id_category";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE author_book RENAME COLUMN "IdAuthor" TO id_author;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE author_book RENAME COLUMN "IdBook" TO id_book;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER INDEX "IX_author_book_IdAuthor" RENAME TO "IX_author_book_id_author";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER INDEX "IX_ContactBook_id_library_book" RENAME TO "IX_contact_book_id_library_book";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE person ALTER COLUMN birthday TYPE timestamp;
    ALTER TABLE person ALTER COLUMN birthday SET NOT NULL;
    ALTER TABLE person ALTER COLUMN birthday DROP DEFAULT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    ALTER TABLE contact_book ADD CONSTRAINT "PK_contact_book" PRIMARY KEY (id_contact, id_library_book);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 23:15:10', updated_at = TIMESTAMP '2020-10-06 23:15:10'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-06 23:15:10', updated_at = TIMESTAMP '2020-10-06 23:15:10'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:15:10'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:15:10'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:15:10'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-06 23:15:10'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007021510_SQL_0010') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201007021510_SQL_0010', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    ALTER TABLE contact_book ADD available boolean NOT NULL DEFAULT FALSE;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-07 19:40:17', updated_at = TIMESTAMP '2020-10-07 19:40:17'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-07 19:40:17', updated_at = TIMESTAMP '2020-10-07 19:40:17'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-07 19:40:17'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-07 19:40:17'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-07 19:40:17'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-07 19:40:17'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201007224017_SQL_0011') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201007224017_SQL_0011', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book DROP CONSTRAINT fk_contact_book_contact_id_contact;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book DROP CONSTRAINT "PK_contact_book";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book RENAME COLUMN id_contact TO id_contact_request;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book ADD id_contact_owner bigint NOT NULL DEFAULT 0;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact ADD name varchar(255) NOT NULL DEFAULT '';
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book ADD CONSTRAINT "PK_contact_book" PRIMARY KEY (id_contact_owner, id_contact_request, id_library_book);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-10 13:35:48', updated_at = TIMESTAMP '2020-10-10 13:35:48'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-10 13:35:48', updated_at = TIMESTAMP '2020-10-10 13:35:48'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-10 13:35:48'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-10 13:35:48'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-10 13:35:48'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-10 13:35:48'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    CREATE INDEX "IX_contact_book_id_contact_request" ON contact_book (id_contact_request);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    CREATE UNIQUE INDEX "IX_contact_email" ON contact (email);
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book ADD CONSTRAINT fk_contact_book_owner_contact_id_contact FOREIGN KEY (id_contact_owner) REFERENCES contact (id) ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    ALTER TABLE contact_book ADD CONSTRAINT fk_contact_book_request_contact_id_contact FOREIGN KEY (id_contact_request) REFERENCES contact (id) ON DELETE RESTRICT;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201010163548_SQL_0012') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201010163548_SQL_0012', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    ALTER TABLE library_book DROP COLUMN reating;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    ALTER TABLE "user" ADD rating_count integer NOT NULL DEFAULT 0;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    ALTER TABLE "user" ADD "RatingValue" integer NOT NULL DEFAULT 0;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-20 21:34:02', updated_at = TIMESTAMP '2020-10-20 21:34:02'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-20 21:34:02', updated_at = TIMESTAMP '2020-10-20 21:34:02'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 21:34:02'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 21:34:02'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 21:34:02'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 21:34:02'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021003402_SQL_0013') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201021003402_SQL_0013', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    ALTER TABLE person RENAME COLUMN birthday TO birthdate;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-20 22:29:01', updated_at = TIMESTAMP '2020-10-20 22:29:01'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-20 22:29:01', updated_at = TIMESTAMP '2020-10-20 22:29:01'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 22:29:01'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 22:29:01'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 22:29:01'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-20 22:29:01'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201021012901_SQL_0014') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201021012901_SQL_0014', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    ALTER TABLE library_book ADD price numeric(12,4) NOT NULL DEFAULT 0.0;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-22 19:56:45', updated_at = TIMESTAMP '2020-10-22 19:56:45'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-22 19:56:45', updated_at = TIMESTAMP '2020-10-22 19:56:45'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-22 19:56:45'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-22 19:56:45'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-22 19:56:45'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-22 19:56:45'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201022225646_SQL_0015') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201022225646_SQL_0015', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image DROP COLUMN extra_large;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image DROP COLUMN large;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image DROP COLUMN medium;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image DROP COLUMN small;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image DROP COLUMN small_thumbnail;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image DROP COLUMN thumbnail;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE person RENAME COLUMN birthdate TO birth_date;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE type ADD "Active" boolean NOT NULL DEFAULT FALSE;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    ALTER TABLE image ADD image_link varchar(255) NOT NULL DEFAULT '';
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-26 21:18:03', updated_at = TIMESTAMP '2020-10-26 21:18:03'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-26 21:18:03', updated_at = TIMESTAMP '2020-10-26 21:18:03'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-26 21:18:03'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-26 21:18:03'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-26 21:18:03'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-26 21:18:03'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027001803_SQL_0016') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201027001803_SQL_0016', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    ALTER TABLE contact_book ADD denied boolean NOT NULL DEFAULT FALSE;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-27 00:41:29', updated_at = TIMESTAMP '2020-10-27 00:41:29'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-27 00:41:29', updated_at = TIMESTAMP '2020-10-27 00:41:29'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 00:41:29'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 00:41:29'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 00:41:29'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 00:41:29'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027034129_SQL_0017') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201027034129_SQL_0017', '3.1.9');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    ALTER TABLE "user" RENAME COLUMN "RatingValue" TO "TotalValue";
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    ALTER TABLE "user" RENAME COLUMN rating_count TO total_count;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    ALTER TABLE contact_book RENAME COLUMN available TO approved;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-27 02:11:04', updated_at = TIMESTAMP '2020-10-27 02:11:04'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    UPDATE profile SET created_at = TIMESTAMP '2020-10-27 02:11:04', updated_at = TIMESTAMP '2020-10-27 02:11:04'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 02:11:04'
    WHERE id = 1;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 02:11:04'
    WHERE id = 2;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 02:11:04'
    WHERE id = 3;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    UPDATE type SET created_at = TIMESTAMP '2020-10-27 02:11:04'
    WHERE id = 4;
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM "__EFMigrationsHistory" WHERE "MigrationId" = '20201027051104_SQL_018') THEN
    INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
    VALUES ('20201027051104_SQL_018', '3.1.9');
    END IF;
END $$;
